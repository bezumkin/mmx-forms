import{d as g,r as t,c as w,a5 as k,o as m,g as d,w as x,u as s,a as C,v as L,N as S,G as V,$ as b}from"./vue-Cn8r9y3J.js";import{v as T}from"./vueform-CIRLp5Lp.js";import{s as B}from"./vue-toastification-BmNyhvTg.js";import{u as E,f as F,h as p,v as M,t as O}from"./common.config-6jiFmk43.js";import"./axios-Cm0UX6qg.js";import"./moment-Cl4UOzQZ.js";import"./popperjs-CBZXh9ac.js";import"./wnumb-BOjvQ4jq.js";import"./trix-ul_qCPMg.js";import"./nouislider-dfTmBPAg.js";import"./vueform-locales-C8ccJXXi.js";const A=["innerHTML"],H=g({__name:"app",props:{id:{type:String,required:!0},schema:{type:Object,default(){return{}}},locale:{type:String,default:"en"}},setup(n){const o=n,a=t({}),r=t(!1),l=t(),i=t(o.id),u=E("success.form.submitted"),c=t(),v=w(()=>{const e={endpoint:!1,formKey:i.value,locale:o.locale,loading:r,onSubmit:y};return"schema"in o.schema?{...o.schema,...e}:{...e,schema:o.schema}});async function y(){r.value=!0;try{const e=await F("web/forms/"+i.value,a.value);l.value.reset(),e.id&&(i.value=e.id),e.action?e.action.type==="message"?c.value=e.action.value:e.action.type==="redirect"?window.location=e.action.value:e.action.type==="reset"&&e.action.value&&p(e.action.value):u.length>0&&p(u)}catch{}finally{r.value=!1}}return(e,f)=>{const h=k("Vueform");return m(),d(V,{mode:"out-in",name:"fade"},{default:x(()=>[s(c)?(m(),C("div",{key:0,innerHTML:s(c)},null,8,A)):(m(),d(h,L({key:1,ref_key:"form",ref:l,modelValue:s(a),"onUpdate:modelValue":f[0]||(f[0]=_=>S(a)?a.value=_:null)},s(v)),null,16,["modelValue"]))]),_:1})}}});document.addEventListener("DOMContentLoaded",()=>{const n=window.mmxForms.locale||"en";window.mmxForms.forms.forEach(o=>{b(H,{id:o.id,schema:o.schema,locale:n}).use(T,M).use(B,O).mount("#mmx-forms-"+o.id)})});
