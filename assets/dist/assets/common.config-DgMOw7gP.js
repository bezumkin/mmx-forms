import{d as p,b as T,e as g}from"./vueform-XI_to9XY.js";import{a as i}from"./axios-Cm0UX6qg.js";import{u as w,P as b}from"./vue-toastification-DLvkSref.js";function f(e,s,t){const{lexicon:o}=window.mmxForms||{lexicon:{}};if(e in o){let n=o[e];if(s&&(Object.keys(s).forEach(r=>{n=n.replaceAll("{"+r+"}",s[r])}),t!==void 0)){const r=n.split("|"),l=x(Number(t),r.length);r[l]&&(n=r[l])}return n}return console.warn(`Could not load lexicon key: "${e}"`),e}function x(e,s){if(e===0)return 0;const t=e>10&&e<20,o=e%10===1;return!t&&o?1:!t&&e%10>=2&&e%10<=4||s<4?2:3}const m=w();function v(e,s={}){m.success(e,s)}function c(e,s={}){m.error(e,s)}function K(){return a.defaults.baseURL}function u(e,s={}){return a(e,{...s})}function L(e,s={},t={}){return u(e,{...t,params:s,method:"GET"})}function P(e,s={},t={}){return u(e,{...t,data:s,method:"POST"})}function U(e,s={},t={}){return u(e,{...t,data:s,method:"PUT"})}function A(e,s={},t={}){return u(e,{...t,data:s,method:"PATCH"})}function O(e,s={},t={}){return u(e,{...t,query:s,method:"DELETE"})}const a=i.create({baseURL:"/mmx-forms/"});a.CancelToken=i.CancelToken;a.isCancel=i.isCancel;a.interceptors.response.use(function(e){return e.data},function(e){if(e.response&&e.response.data&&typeof e.response.data=="string"){const s=e.response.data.includes(".")?f(e.response.data):e.response.data;c(s)}return Promise.reject(e.response)});const R={position:b.TOP_RIGHT,maxToasts:5,timeout:5e3,pauseOnHover:!0,pauseOnFocusLoss:!0,closeButton:!1,closeOnClick:!1,draggable:!0,transition:"Vue-Toastification__slideBlurred"};function d(e,s){if(!e.formKey){const t=f(s);throw c(t),new Error(t)}return e.formKey}async function h(e,s){const t=d(s.form$,"errors.file.upload"),o=new FormData;return o.append("file",e),await P("/web/forms/"+t+"/files",o,{onUploadProgress:n=>{s.progress=Math.round(n.loaded*100/n.total)}})}async function C({tmp:e},s){const t=d(s.form$,"errors.file.delete");await O("/web/forms/"+t+"/files/"+e)}const $=p({theme:T,locales:{en:g},locale:"en",axios:a,endpoints:{submit:!1,uploadTempFile:h,removeTempFile:C,removeFile:!1,attachment(){const e=f("errors.file.attachment");throw c(e),new Error(e)}}});export{L as a,O as b,c,U as d,A as e,P as f,K as g,v as h,R as t,f as u,$ as v};
