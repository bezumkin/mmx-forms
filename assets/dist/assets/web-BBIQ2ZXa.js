import{d as g,r as t,c as y,o as i,g as d,w,u as n,a as k,v as x,M as C,E as L,a6 as V,$ as b}from"./vue-CtCNMA3P.js";import{_ as E}from"./bootstrap-vue-next-DWmnrxyd.js";import{v as M}from"./vueform-bjGVKQ0y.js";import{s as S}from"./vue-toastification-BdZxUhs9.js";import{u as T,f as B,g as O,v as A,t as F}from"./use-api-CABo2mPT.js";import"./axios-Bo0ATomq.js";import"./moment-Cl4UOzQZ.js";import"./popperjs-CBZXh9ac.js";import"./wnumb-BOjvQ4jq.js";import"./trix-ul_qCPMg.js";import"./nouislider-dfTmBPAg.js";import"./ofetch-C3euP1G2.js";import"./destr-CVtkxrq9.js";import"./ufo-DbHr4xTX.js";const H=["innerHTML"],P=g({__name:"app",props:{id:{type:String,required:!0},schema:{type:Object,default(){return{}}}},setup(o){const s=o,m=t(!1),a=t({}),c=t(),u=t(s.id),l=T("success.form.submitted"),r=t(),f=y(()=>{const e={endpoint:!1,onSubmit:v};return"schema"in s.schema?{...s.schema,...e}:{...e,schema:s.schema}});async function v(){m.value=!0;try{const e=await B("web/forms/"+u.value,a.value);c.value.reset(),e.id&&(u.value=e.id),e.action?e.action.type==="message"?r.value=e.action.value:e.action.type==="redirect"&&(window.location=e.action.value):l.length>0&&O(l)}catch{}finally{m.value=!1}}return(e,p)=>{const _=V("Vueform");return i(),d(L,{mode:"out-in",name:"fade"},{default:w(()=>[n(r)?(i(),k("div",{key:0,innerHTML:n(r)},null,8,H)):(i(),d(_,x({key:1,ref_key:"form",ref:c,modelValue:n(a),"onUpdate:modelValue":p[0]||(p[0]=h=>C(a)?a.value=h:null)},n(f)),null,16,["modelValue"]))]),_:1})}}});document.addEventListener("DOMContentLoaded",()=>{window.mmxForms.forms.forEach(o=>{b(P,{id:o.id,schema:o.schema}).use(M,A).use(E()).use(S,F).mount("#mmx-forms-"+o.id)})});
