import{d as p,e as T,f as g,n as w,r as x}from"./vueform-locales-C8ccJXXi.js";import{d as P,b}from"./vueform-CIRLp5Lp.js";import{a as i}from"./axios-Cm0UX6qg.js";import{u as O,P as h}from"./vue-toastification-BmNyhvTg.js";function f(e,s,t){const{lexicon:o}=window.mmxForms||{lexicon:{}};if(e in o){let n=o[e];if(s&&(Object.keys(s).forEach(r=>{n=n.replaceAll("{"+r+"}",s[r])}),t!==void 0)){const r=n.split("|"),l=C(Number(t),r.length);r[l]&&(n=r[l])}return n}return console.warn(`Could not load lexicon key: "${e}"`),e}function C(e,s){if(e===0)return 0;const t=e>10&&e<20,o=e%10===1;return!t&&o?1:!t&&e%10>=2&&e%10<=4||s<4?2:3}const m=O();function R(e,s={}){m.success(e,s)}function c(e,s={}){m.error(e,s)}function $(){return a.defaults.baseURL}function u(e,s={}){return a(e,{...s})}function D(e,s={},t={}){return u(e,{...t,params:s,method:"GET"})}function y(e,s={},t={}){return u(e,{...t,data:s,method:"POST"})}function G(e,s={},t={}){return u(e,{...t,data:s,method:"PUT"})}function H(e,s={},t={}){return u(e,{...t,data:s,method:"PATCH"})}function E(e,s={},t={}){return u(e,{...t,query:s,method:"DELETE"})}const a=i.create({baseURL:"/mmx-forms/"});a.CancelToken=i.CancelToken;a.isCancel=i.isCancel;a.interceptors.response.use(function(e){return e.data},function(e){if(e.response&&e.response.data&&typeof e.response.data=="string"){const s=e.response.data.includes(".")?f(e.response.data):e.response.data;c(s)}return Promise.reject(e.response)});const I={position:h.TOP_RIGHT,maxToasts:5,timeout:5e3,pauseOnHover:!0,pauseOnFocusLoss:!0,closeButton:!1,closeOnClick:!1,draggable:!0,transition:"Vue-Toastification__slideBlurred"};function d(e,s){if(!e.formKey){const t=f(s);throw c(t),new Error(t)}return e.formKey}async function F(e,s){const t=d(s.form$,"errors.file.upload"),o=new FormData;return o.append("file",e),await y("/web/forms/"+t+"/files",o,{onUploadProgress:n=>{s.progress=Math.round(n.loaded*100/n.total)}})}async function v({tmp:e},s){const t=d(s.form$,"errors.file.delete");await E("/web/forms/"+t+"/files/"+e)}const S=P({axios:a,theme:b,locales:{de:p,en:T,fr:g,nl:w,ru:x},endpoints:{uploadTempFile:F,removeTempFile:v,attachment(){const e=f("errors.file.attachment");throw c(e),new Error(e)}}});export{D as a,E as b,c,G as d,H as e,y as f,$ as g,R as h,I as t,f as u,S as v};
