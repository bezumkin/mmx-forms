import{n as g,a as w}from"./vesp-BWOLZfeR.js";import{c as x,P as C}from"./api-BB7pugyw.js";import{u as V}from"./use-date-DiRmKNaa.js";import{d as h,z as i,A as r,g as M,o as l,b as m,w as c,q as B,u as o,i as H,h as N}from"./vue-CymQEo73.js";import"./vue-bootstrap-DXYJr9xG.js";import"./vue-router-SdgTLvHG.js";import"./vueform-C-uVWh8C.js";const T=["innerHTML"],u="mgr/submissions",P=h({__name:"submissions",setup(q){const e=x,s=i(),d=r(()=>[{key:"id",label:e("models.submission.id"),sortable:!0},{key:"form.title",label:e("models.form.title_one")},{key:"emails_count",label:e("models.email.title_many"),sortable:!0},{key:"submitted_at",label:e("models.submission.submitted_at"),sortable:!0,formatter:V}]),f=r(()=>{var t;return[{route:{name:"submissions-id-view"},icon:"eye",title:e("actions.view")},{function:b,icon:"sync",title:e("actions.generate")},{function:(t=s.value)==null?void 0:t.delete,icon:"times",title:e("actions.delete"),variant:"danger"}]}),_=i({query:""}),n=i(0);function b(t){n.value=t.id}async function p(){try{await C(u+"/"+n.value),s.value.refresh()}catch{}}return(t,a)=>{const v=M("RouterView"),y=g,k=w;return l(),m(k,{ref_key:"table",ref:s,url:u,"table-actions":o(f),fields:o(d),filters:o(_),sort:"id",dir:"desc"},{default:c(()=>[B(v),o(n)>0?(l(),m(y,{key:0,"ok-variant":"warning","on-ok":p,onHidden:a[0]||(a[0]=A=>n.value=0)},{default:c(()=>[H("div",{innerHTML:o(e)("models.submission.confirm_generate")},null,8,T)]),_:1})):N("",!0)]),_:1},8,["table-actions","fields","filters"])}}});export{P as default};
