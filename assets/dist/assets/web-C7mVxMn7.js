import{d as h,r as t,o as n,g as f,w as y,u as r,a as g,M as w,E as k,a6 as x,$ as C}from"./vue-CtCNMA3P.js";import{_ as L}from"./bootstrap-vue-next-DWmnrxyd.js";import{v as V}from"./vueform-AVVLisBN.js";import{s as b}from"./vue-toastification-BdZxUhs9.js";import{u as E,f as M,g as S,v as T,t as B}from"./use-api-Z9jaD-Ww.js";import"./axios-Bo0ATomq.js";import"./moment-Cl4UOzQZ.js";import"./ofetch-C3euP1G2.js";import"./destr-CVtkxrq9.js";import"./ufo-DbHr4xTX.js";const O=["innerHTML"],A=h({__name:"app",props:{id:{type:String,required:!0},schema:{type:Object,default(){return{}}}},setup(o){const d=o,i=t(!1),s=t({}),m=t(),c=t(d.id),u=E("success.form.submitted"),a=t();async function p(){i.value=!0;try{const e=await M("web/forms/"+c.value,s.value);m.value.reset(),e.id&&(c.value=e.id),e.action?e.action.type==="message"?a.value=e.action.value:e.action.type==="redirect"&&(window.location=e.action.value):u.length>0&&S(u)}catch{}finally{i.value=!1}}return(e,l)=>{const v=x("Vueform");return n(),f(k,{mode:"out-in",name:"fade"},{default:y(()=>[r(a)?(n(),g("div",{key:0,innerHTML:r(a)},null,8,O)):(n(),f(v,{key:1,ref_key:"form",ref:m,modelValue:r(s),"onUpdate:modelValue":l[0]||(l[0]=_=>w(s)?s.value=_:null),endpoint:!1,schema:o.schema,onSubmit:p},null,8,["modelValue","schema"]))]),_:1})}}});document.addEventListener("DOMContentLoaded",()=>{window.mmxForms.forms.forEach(o=>{C(A,{id:o.id,schema:o.schema}).use(V,T).use(L()).use(b,B).mount("#mmx-forms-"+o.id)})});
