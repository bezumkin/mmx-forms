import{d as _,r as a,c as g,o as i,g as d,w as y,u as n,a as w,v as k,M as x,E as C,a6 as L,$ as V}from"./vue-CtCNMA3P.js";import{v as b}from"./vueform-bjGVKQ0y.js";import{s as E}from"./vue-toastification-BdZxUhs9.js";import{u as M,f as S,g as T,v as B,t as O}from"./use-api-CABo2mPT.js";import"./axios-Bo0ATomq.js";import"./moment-Cl4UOzQZ.js";import"./popperjs-CBZXh9ac.js";import"./wnumb-BOjvQ4jq.js";import"./trix-ul_qCPMg.js";import"./nouislider-dfTmBPAg.js";import"./ofetch-C3euP1G2.js";import"./destr-CVtkxrq9.js";import"./ufo-DbHr4xTX.js";const A=["innerHTML"],F=_({__name:"app",props:{id:{type:String,required:!0},schema:{type:Object,default(){return{}}}},setup(o){const t=o,s=a({}),m=a(),c=a(t.id),u=M("success.form.submitted"),r=a(),f=g(()=>{const e={endpoint:!1,onSubmit:l};return"schema"in t.schema?{...t.schema,...e}:{...e,schema:t.schema}});async function l(){try{const e=await S("web/forms/"+c.value,s.value);m.value.reset(),e.id&&(c.value=e.id),e.action?e.action.type==="message"?r.value=e.action.value:e.action.type==="redirect"&&(window.location=e.action.value):u.length>0&&T(u)}catch{}}return(e,p)=>{const v=L("Vueform");return i(),d(C,{mode:"out-in",name:"fade"},{default:y(()=>[n(r)?(i(),w("div",{key:0,innerHTML:n(r)},null,8,A)):(i(),d(v,k({key:1,ref_key:"form",ref:m,modelValue:n(s),"onUpdate:modelValue":p[0]||(p[0]=h=>x(s)?s.value=h:null)},n(f)),null,16,["modelValue"]))]),_:1})}}});document.addEventListener("DOMContentLoaded",()=>{window.mmxForms.forms.forEach(o=>{V(F,{id:o.id,schema:o.schema}).use(b,B).use(E,O).mount("#mmx-forms-"+o.id)})});
