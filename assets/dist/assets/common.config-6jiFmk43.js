import{d as p,e as T,f as g,n as w,r as x}from"./vueform-locales-C8ccJXXi.js";import{d as P,b}from"./vueform-CIRLp5Lp.js";import{a as u}from"./axios-Cm0UX6qg.js";import{u as O,P as h}from"./vue-toastification-BmNyhvTg.js";function f(e,t,s){const{lexicon:o}=window.mmxForms||{lexicon:{}};if(e in o){let n=o[e];if(t&&(Object.keys(t).forEach(r=>{n=n.replaceAll("{"+r+"}",t[r])}),s!==void 0)){const r=n.split("|"),l=C(Number(s),r.length);r[l]&&(n=r[l])}return n}return console.warn(`Could not load lexicon key: "${e}"`),e}function C(e,t){if(e===0)return 0;const s=e>10&&e<20,o=e%10===1;return!s&&o?1:!s&&e%10>=2&&e%10<=4||t<4?2:3}const m=O();function R(e,t={}){m.success(e,t)}function c(e,t={}){m.error(e,t)}function $(){return a.defaults.baseURL}function i(e,t={}){return t.isApi=!0,a(e,{...t})}function D(e,t={},s={}){return i(e,{...s,params:t,method:"GET"})}function y(e,t={},s={}){return i(e,{...s,data:t,method:"POST"})}function G(e,t={},s={}){return i(e,{...s,data:t,method:"PUT"})}function H(e,t={},s={}){return i(e,{...s,data:t,method:"PATCH"})}function E(e,t={},s={}){return i(e,{...s,query:t,method:"DELETE"})}const a=u.create({baseURL:"/mmx-forms/"});a.CancelToken=u.CancelToken;a.isCancel=u.isCancel;a.interceptors.response.use(function(e){var t;return(t=e.config)!=null&&t.isApi?e.data:e},function(e){if(e.response&&e.response.data&&typeof e.response.data=="string"){const t=e.response.data.includes(".")?f(e.response.data):e.response.data;c(t)}return Promise.reject(e.response)});const I={position:h.TOP_RIGHT,maxToasts:5,timeout:5e3,pauseOnHover:!0,pauseOnFocusLoss:!0,closeButton:!1,closeOnClick:!1,draggable:!0,transition:"Vue-Toastification__slideBlurred"};function d(e,t){if(!e.formKey){const s=f(t);throw c(s),new Error(s)}return e.formKey}async function F(e,t){const s=d(t.form$,"errors.file.upload"),o=new FormData;return o.append("file",e),await y("/web/forms/"+s+"/files",o,{onUploadProgress:n=>{t.progress=Math.round(n.loaded*100/n.total)}})}async function v({tmp:e},t){const s=d(t.form$,"errors.file.delete");await E("/web/forms/"+s+"/files/"+e)}const S=P({axios:a,theme:b,locales:{de:p,en:T,fr:g,nl:w,ru:x},endpoints:{uploadTempFile:F,removeTempFile:v,attachment(){const e=f("errors.file.attachment");throw c(e),new Error(e)}}});export{D as a,E as b,c,G as d,H as e,y as f,$ as g,R as h,I as t,f as u,S as v};
