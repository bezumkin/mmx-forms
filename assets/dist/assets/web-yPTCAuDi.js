import{d as y,r as a,c as g,o as i,g as d,w,u as n,a as k,v as x,M as C,E as L,a6 as V,$ as b}from"./vue-CtCNMA3P.js";import{v as E}from"./vueform-bjGVKQ0y.js";import{s as M}from"./vue-toastification-BdZxUhs9.js";import{u as S,f as T,g as l,v as B,t as O}from"./use-api-CABo2mPT.js";import"./axios-Bo0ATomq.js";import"./moment-Cl4UOzQZ.js";import"./popperjs-CBZXh9ac.js";import"./wnumb-BOjvQ4jq.js";import"./trix-ul_qCPMg.js";import"./nouislider-dfTmBPAg.js";import"./ofetch-C3euP1G2.js";import"./destr-CVtkxrq9.js";import"./ufo-DbHr4xTX.js";const A=["innerHTML"],F=y({__name:"app",props:{id:{type:String,required:!0},schema:{type:Object,default(){return{}}}},setup(t){const o=t,s=a({}),m=a(),c=a(o.id),u=S("success.form.submitted"),r=a(),f=g(()=>{const e={endpoint:!1,onSubmit:v};return"schema"in o.schema?{...o.schema,...e}:{...e,schema:o.schema}});async function v(){try{const e=await T("web/forms/"+c.value,s.value);m.value.reset(),e.id&&(c.value=e.id),e.action?e.action.type==="message"?r.value=e.action.value:e.action.type==="redirect"?window.location=e.action.value:e.action.type==="reset"&&e.action.value&&l(e.action.value):u.length>0&&l(u)}catch{}}return(e,p)=>{const h=V("Vueform");return i(),d(L,{mode:"out-in",name:"fade"},{default:w(()=>[n(r)?(i(),k("div",{key:0,innerHTML:n(r)},null,8,A)):(i(),d(h,x({key:1,ref_key:"form",ref:m,modelValue:n(s),"onUpdate:modelValue":p[0]||(p[0]=_=>C(s)?s.value=_:null)},n(f)),null,16,["modelValue"]))]),_:1})}}});document.addEventListener("DOMContentLoaded",()=>{window.mmxForms.forms.forEach(t=>{b(F,{id:t.id,schema:t.schema}).use(E,B).use(M,O).mount("#mmx-forms-"+t.id)})});
