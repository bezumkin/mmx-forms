import{W as B,a as M,Q as N}from"./vesp-Bp925PML.js";import{m as T}from"./vue-bootstrap-BxJOzva2.js";import{x as D,p as H,P}from"./api-BTbQaFYe.js";import{u as h}from"./use-date-Bz43xCTR.js";import{d as q,z as l,A as c,g as A,o as f,b as p,w as s,q as m,e as E,f as G,u as o,i as L,h as Q}from"./vue-u_8eP0W0.js";import"./vue-router-DIhyXLOA.js";import"./vueform-C51mNOCu.js";const R=["innerHTML"],u="mgr/submissions",J=q({__name:"submissions",setup(W){const e=D,a=l(),_=c(()=>[{key:"id",label:e("models.submission.id"),sortable:!0},{key:"form.title",label:e("models.form.title_one")},{key:"emails_count",label:e("models.email.title_many"),sortable:!0},{key:"submitted_at",label:e("models.submission.submitted_at"),sortable:!0,formatter:h}]),b=c(()=>{var t;return[{route:{name:"submissions-id-view"},icon:"eye",title:e("actions.view")},{function:v,icon:"sync",title:e("actions.generate")},{function:(t=a.value)==null?void 0:t.delete,icon:"times",title:e("actions.delete"),variant:"danger"}]}),r=l({query:"",date:[]}),i=l(0);function v(t){i.value=t.id}function y(){const t=a.value.getParams();console.log(t),window.open("/"+H()+"/"+u+"/export?"+t)}async function g(){try{await P(u+"/"+i.value),a.value.refresh()}catch{}}return(t,n)=>{const k=T,x=B,w=A("RouterView"),V=M,C=N;return f(),p(C,{ref_key:"table",ref:a,url:u,"table-actions":o(b),fields:o(_),filters:o(r),sort:"id",dir:"desc"},{"header-start":s(()=>[m(k,{onClick:n[0]||(n[0]=()=>y())},{default:s(()=>[E(G(o(e)("actions.export")),1)]),_:1})]),"header-middle":s(()=>[m(x,{modelValue:o(r).date,"onUpdate:modelValue":n[1]||(n[1]=d=>o(r).date=d)},null,8,["modelValue"])]),default:s(()=>[m(w),o(i)>0?(f(),p(V,{key:0,"ok-variant":"warning","on-ok":g,onHidden:n[2]||(n[2]=d=>i.value=0)},{default:s(()=>[L("div",{innerHTML:o(e)("models.submission.confirm_generate")},null,8,R)]),_:1})):Q("",!0)]),_:1},8,["table-actions","fields","filters"])}}});export{J as default};
