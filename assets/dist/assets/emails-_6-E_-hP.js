import{_ as V,a as B}from"./mgr-pKSUcK_s.js";import{f as M,u as $,b as A}from"./common.config-Bu28tB0F.js";import{u as D}from"./use-date-DVdoth2I.js";import{d as H,r as l,c,a5 as L,o as s,g as f,w as m,a as u,i as N,u as n,l as T,q as j}from"./vue-Cn8r9y3J.js";import"./vue-router-DHwPpZ-C.js";import"./bootstrap-vue-next-BMSRTt_F.js";import"./vueform-CIRLp5Lp.js";import"./axios-Cm0UX6qg.js";import"./moment-Cl4UOzQZ.js";import"./popperjs-CBZXh9ac.js";import"./wnumb-BOjvQ4jq.js";import"./trix-ul_qCPMg.js";import"./nouislider-dfTmBPAg.js";import"./vue-toastification-BmNyhvTg.js";import"./codemirror-BQUORstc.js";import"./lezer-BmdiRFRL.js";import"./style-mod-Bc2inJdb.js";import"./w3c-keyname-Vcq4gwWv.js";import"./crelt-C8TCjufn.js";import"./vue-codemirror-DCS0DUvI.js";import"./vueform-locales-C8ccJXXi.js";const q={key:0,class:"icon icon-times fa-fw text-danger"},R={key:1,class:"icon icon-check fa-fw text-success"},S={key:2,class:"icon icon-hourglass-half text-secondary fa-fw"},U=["innerHTML"],d="mgr/emails",le=H({__name:"emails",setup(E){const e=$,o=l(),p=c(()=>[{key:"id",label:e("models.submission.id"),sortable:!0},{key:"form.title",label:e("models.form.title_one"),sortable:!0},{key:"to",label:e("models.email.to"),sortable:!0},{key:"subject",label:e("models.email.subject"),sortable:!0},{key:"sent",label:e("models.email.sent"),sortable:!0},{key:"sent_at",label:e("models.email.sent_at"),sortable:!0,formatter:D}]),_=c(()=>[{function:h,icon:"trash",title:e("actions.delete_unsent"),variant:"danger"}]),b=c(()=>{var t;return[{function:v,icon:"paper-plane",title:e("actions.send"),isActive:k},{route:{name:"emails-id-view"},icon:"eye",title:e("actions.view")},{function:(t=o.value)==null?void 0:t.delete,icon:"times",title:e("actions.delete"),variant:"danger"}]}),y=l({query:""}),a=l(!1);function k(t){return t&&!t.sent}async function v(t){o.value.loading=!0;try{await M(d+"/"+t.id)}catch{}finally{o.value.loading=!1,o.value.refresh()}}function h(){a.value=!0}async function w(){o.value.loading=!0;try{await A(d)}catch{}finally{o.value.loading=!1,o.value.refresh()}}return(t,i)=>{const g=L("RouterView"),x=V,C=B;return s(),f(C,{ref_key:"table",ref:o,url:d,"table-actions":n(b),"header-actions":n(_),fields:n(p),filters:n(y),sort:"id",dir:"desc"},{"cell(sent)":m(({value:r})=>[r===!1?(s(),u("i",q)):r===!0?(s(),u("i",R)):(s(),u("i",S))]),default:m(()=>[N(g),n(a)?(s(),f(x,{key:0,"on-ok":w,onHidden:i[0]||(i[0]=r=>a.value=!1)},{default:m(()=>[T("div",{innerHTML:n(e)("models.email.confirm_delete_unsent")},null,8,U)]),_:1})):j("",!0)]),_:1},8,["table-actions","header-actions","fields","filters"])}}});export{le as default};
