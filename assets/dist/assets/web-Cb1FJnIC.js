import{d as g,r as t,c as w,o as m,g as d,w as k,u as n,a as x,v as C,N as L,G as V,a6 as b,$ as S}from"./vue-CQlTxiy5.js";import{v as T}from"./vueform-XI_to9XY.js";import{s as B}from"./vue-toastification-DLvkSref.js";import{u as E,f as M,h as p,v as O,t as A}from"./common.config-DgMOw7gP.js";import"./axios-Cm0UX6qg.js";import"./moment-Cl4UOzQZ.js";import"./popperjs-CBZXh9ac.js";import"./wnumb-BOjvQ4jq.js";import"./trix-ul_qCPMg.js";import"./nouislider-dfTmBPAg.js";const F=["innerHTML"],H=g({__name:"app",props:{id:{type:String,required:!0},schema:{type:Object,default(){return{}}}},setup(o){const s=o,a=t({}),r=t(!1),u=t(),i=t(s.id),l=E("success.form.submitted"),c=t(),v=w(()=>{const e={endpoint:!1,formKey:i.value,loading:r,onSubmit:h};return"schema"in s.schema?{...s.schema,...e}:{...e,schema:s.schema}});async function h(){r.value=!0;try{const e=await M("web/forms/"+i.value,a.value);u.value.reset(),e.id&&(i.value=e.id),e.action?e.action.type==="message"?c.value=e.action.value:e.action.type==="redirect"?window.location=e.action.value:e.action.type==="reset"&&e.action.value&&p(e.action.value):l.length>0&&p(l)}catch{}finally{r.value=!1}}return(e,f)=>{const y=b("Vueform");return m(),d(V,{mode:"out-in",name:"fade"},{default:k(()=>[n(c)?(m(),x("div",{key:0,innerHTML:n(c)},null,8,F)):(m(),d(y,C({key:1,ref_key:"form",ref:u,modelValue:n(a),"onUpdate:modelValue":f[0]||(f[0]=_=>L(a)?a.value=_:null)},n(v)),null,16,["modelValue"]))]),_:1})}}});document.addEventListener("DOMContentLoaded",()=>{window.mmxForms.forms.forEach(o=>{S(H,{id:o.id,schema:o.schema}).use(T,O).use(B,A).mount("#mmx-forms-"+o.id)})});
