import{Z as h,W as N,a as T,Q as D}from"./vesp-Bp925PML.js";import{m as H}from"./vue-bootstrap-BxJOzva2.js";import{x as P,p as q,P as A}from"./api-BTbQaFYe.js";import{u as E}from"./use-date-Bz43xCTR.js";import{d as G,z as d,A as c,g as I,o as f,b as p,w as a,i as _,q as m,u as e,e as L,f as Q,h as R}from"./vue-u_8eP0W0.js";import"./vue-router-DIhyXLOA.js";import"./vueform-C51mNOCu.js";const U={class:"d-flex gap-2 mb-2 mb-md-0"},W=["innerHTML"],u="mgr/submissions",O=G({__name:"submissions",setup(Z){const t=P,i=d(),b=c(()=>[{key:"id",label:t("models.submission.id"),sortable:!0},{key:"form.title",label:t("models.form.title_one")},{key:"emails_count",label:t("models.email.title_many"),sortable:!0},{key:"submitted_at",label:t("models.submission.submitted_at"),sortable:!0,formatter:E}]),x=c(()=>{var o;return[{route:{name:"submissions-id-view"},icon:"eye",title:t("actions.view")},{function:g,icon:"sync",title:t("actions.generate")},{function:(o=i.value)==null?void 0:o.delete,icon:"times",title:t("actions.delete"),variant:"danger"}]}),s=d({query:"",date:[],form_id:null}),r=d(0);function g(o){r.value=o.id}function v(){const o=i.value.getParams();console.log(o),window.open("/"+q()+"/"+u+"/export?"+o)}async function y(){try{await A(u+"/"+r.value),i.value.refresh()}catch{}}return(o,n)=>{const k=h,V=H,w=N,C=I("RouterView"),B=T,M=D;return f(),p(M,{ref_key:"table",ref:i,url:u,"table-actions":e(x),fields:e(b),filters:e(s),sort:"id",dir:"desc"},{"header-start":a(()=>[_("div",U,[m(k,{modelValue:e(s).form_id,"onUpdate:modelValue":n[0]||(n[0]=l=>e(s).form_id=l),url:"mgr/forms",placeholder:e(t)("models.submission.export_placeholder")},null,8,["modelValue","placeholder"]),m(V,{disabled:!e(s).form_id,onClick:n[1]||(n[1]=()=>v())},{default:a(()=>[L(Q(e(t)("actions.export")),1)]),_:1},8,["disabled"])])]),"header-middle":a(()=>[m(w,{modelValue:e(s).date,"onUpdate:modelValue":n[2]||(n[2]=l=>e(s).date=l)},null,8,["modelValue"])]),default:a(()=>[m(C),e(r)>0?(f(),p(B,{key:0,"ok-variant":"warning","on-ok":y,onHidden:n[3]||(n[3]=l=>r.value=0)},{default:a(()=>[_("div",{innerHTML:e(t)("models.submission.confirm_generate")},null,8,W)]),_:1})):R("",!0)]),_:1},8,["table-actions","fields","filters"])}}});export{O as default};
